<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@40,400,0,0" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.1.js"></script>

    <title>구조 잡기</title>
    <link rel="stylesheet" href="/css/shopCategory.css" />
    <script>
        $(document).ready(function (){

            viewCart();


        })
        const viewCart = function (){
            const category = $("#category").val();
            console.log(category)
            $.ajax({
                url : "/shopping/productListView",
                data : {category},
            }).then(suc => {
                console.log(suc);
                if(suc == null){
                    alert("상품이 없습니다.");
                    location.href="/shopping";
                    return;
                }else{
                    $.each(suc, function (i, m){
                        const msg  = `              <div>  <img src="/image/product/${m.productMainImage}" alter="product" class="productImage" >
                    <div>${m.productName}</div>
                    <div>${m.productPrice}</div>
                    <button class="btn btn-outline-primary productBasket" data-no="${m.productNumber}">장바구니</button>
                    <button class="btn btn-outline-success productBuy" data-no="${m.productNumber}">구매하기</button> </div>`
                    $(".productContent").append(msg)
                    })}
            }).catch(err => console.log(err))
        }
    </script>
</head>
<body>
<header class="header">
    <img src="/image/logo최종.png" alt="logo" class="logo" />
    <input type="hidden" name="category" id="category" th:value="${category}">
    <menu>

        <div class="searchBox">
            <input
                    type="text"
                    class="searchTerm"
                    placeholder="상품을 찾아보세요."
            />
            <button type="submit" class="searchButton">
                <i class="fa fa-search"></i>
            </button>
        </div>
    </menu>
    <nav class="userBox">
        <span class="signin">SignIn</span>
        <span class="signup">SignUp</span>
    </nav>
</header>
<main>
    <div class="mainContent">
        <div class="menuBar">
            <ul>
                <li>식물</li>
                <li>꽃 바구니</li>
                <li>화환</li>
                <li>흙, 식물 영양제</li>
                <li>화병, 화분</li>
            </ul>
        </div>
        <div class="categoryBar">
            <div class="sortSelect">
                <select name="sort" id="sort" class="form-select form-select-sm">
                    <option value="">기본</option>
                    <option value="">가격 낮은 순</option>
                    <option value="">가격 높은 순</option>
                    <option value="">평점 높은 순</option>
                </select>
            </div>
        </div>
        <hr/>
        <div class="productContent">
            <!--3x2 그리드 시작-->
<!--            <div class="product">-->
<!--                <img src="#" alter="product" class="productImage">-->
<!--                <div>상품이름</div>-->
<!--                <div>상품가격</div>-->
<!--            </div>-->
        </div>
        <div class="pagingButton">
            <button class="btn btn-outline-dark">1</button>
            <button class="btn btn-outline-dark">2</button>
            <button class="btn btn-outline-dark">3</button>
            <button class="btn btn-outline-dark">4</button>
            <button class="btn btn-outline-dark">5</button>
        </div>

    </div>
</main>
<footer>
</footer>
</body>
</html>
