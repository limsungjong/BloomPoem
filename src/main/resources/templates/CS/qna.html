<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css"/>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@40,400,0,0" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.1.js"></script>
  <link rel="stylesheet" type="text/css" href="/css/qna.css"/>
  <link rel="stylesheet" type="text/css" href="/css/footer.css"/>
  <script src="/build/userContext.js" defer></script>
  <title>Bloom Poem 나의 문의 내역</title>
</head>
<script th:inline="javascript">
  const qnaList = [[${qnaList}]]
  console.log(qnaList)

</script>
<script>
  $(document).ready(()=>{
    $(".mainBox").on("click", ".qnaTitle" ,(e)=>{
      const target= e.target.dataset.no
      $("#qnaNumber").val(target);
      document.viewForm.submit();
    })
  })
</script>
<body>
<header class="header">
  <a href="http://localhost:9000">
    <img src="/image/logo최종.png" alt="logo" class="logo" /></a>
  <menu>
    <span><a href="http://localhost:9000/pick_up">Pick Up</a></span>
    <span><a href="http://localhost:9000/shopping">Shop</a></span>
    <span><a href="http://localhost:9000/recommend">Recommend</a></span>
  </menu>
  <nav class="userBox">
    <span class="signin">SignIn</span>
    <span class="signup">SignUp</span>
  </nav>
</header>
<main>
  <div class="navArea">
    <div class="navBox">
      <div style="font-size: 2rem">나의 문의내역</div>
    </div>
  </div>

<div class="mainArea">
  <div class="mainBox">
    <div class="th">
      <div class="qnaNumber">번호</div>
      <div class="qnaStatus">답변상태</div>
      <div class="qnaTitle">제목</div>
      <div class="qnaRegDate">등록일</div>
    </div>
    <th:block th:if="${qnaList.content.size() == 0}"  ><div class="tr">작성된 게시글이 없습니다.</div></th:block>
    <div class="tr" th:each=" qna : ${qnaList} " >
      <div class="qnaNumber" th:text="${qnaStat.index +1}"></div>

      <th:block th:if="${#strings.equals(qna.getQnaStatus(), 'R')}">
        <div class="qnaStatus">
          <th:block th:each="num :${#numbers.sequence(1, qna.getQnaIndent())}" ><span style="width: 30px;">&nbsp</span></th:block><span class="material-symbols-outlined">subdirectory_arrow_right</span>
        </div>
      </th:block>
      <th:block th:unless="${#strings.equals(qna.getQnaStatus(), 'R')}">
        <div class="qnaStatus" th:text="${qna.getQnaStatus()}">
        </div>
      </th:block>

      <div class="qnaTitle" th:data-no="${qna.getQnaNumber()}" th:text="${qna.getQnaTitle()}"></div>
      <div class="qnaRegDate" th:text="${qna.qnaDate.toString().split('T')[0]}"></div>
    </div>
  </div>
</div>
<div class="navButtonArea">
  <div class="navButtonBox">
    <button class="btn btn-outline-primary" onclick="location.href ='http://localhost:9000/FAQ'">자주 묻는 질문 보기</button>
    <button class="btn btn-outline-primary" onclick="location.href ='http://localhost:9000/qna/write'" id="btnWrite">문의하기</button>
  </div>
</div>

  <div class="paging">
    <div th:each=" num : ${#numbers.sequence(1, qnaList.totalPages)}" >
      <button class="btn btn-outline-dark"th:text="${num}"></button>
    </div>
  </div>
  <form action="/qna/view"  method="get" name="viewForm">
    <input type="hidden" id="qnaNumber" name="qnaNumber">
  </form>
</main>
<footer>
  <div class="footerWrapper">
    <div class="footerTop">
      <ul class="footerListText">
        <li class="footerText"><a href="/FAQ">고객센터</a></li>
        <li class="footerText"><a href="/privacy">개인정보처리방침</a></li>
      </ul>
    </div>
    <div class="footerCenter">
      <div class="line"></div>
    </div>
    <div class="footerBottom">
      <ul class="footerListText">
        <li class="footerText">사업자 명 : 블룸 포엠</li>
        <li class="footerText">대표자 명 : 임성종</li>
        <li class="footerText">
          오시는 길 : 인천 미추홀구 매소홀로488번길 6-32 태승빌딩 5층(1층
          홈플러스)
        </li>
        <li class="footerText">연락처 : 032-876-3332</li>
      </ul>
    </div>
  </div>
</footer>
</body>
</html>